<nav class="navbar navbar-expand-lg border border-primary m-3 fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand fs-3" href="{{ site.baseurl }}/"
      >{{ site.clubacronym }} @ ISU</a
    >
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        {% for item in site.data.sitemap %} {% assign full_url = baseurl |
        append: item.url %} {% assign normalized_page_url = page.url | remove:
        '/' %} {% assign normalized_item_url = full_url | remove: '/' %} {% if
        item.dropdown %}
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            {{ item.title }}
          </a>
          <ul class="dropdown-menu">
            {% for subitem in item.dropdown %} {% assign subitem_full_url =
            baseurl | append: subitem.url %} {% assign normalized_subitem_url =
            subitem_full_url | remove: '/' %}
            <li>
              <a
                class="dropdown-item{% if normalized_page_url == normalized_subitem_url %} active{% endif %}"
                href="{{ site.baseurl }}{{ subitem_full_url }}"
                {%
                if
                subitem.external
                %}
                target="_blank"
                {%
                endif
                %}
              >
                {{ subitem.title }}{% if subitem.external %}
                <i class="bi bi-box-arrow-up-right"></i>{% endif %}
              </a>
            </li>
            {% endfor %}
          </ul>
        </li>
        {% else %}
        <li class="nav-item">
          <a
            class="nav-link{% if normalized_page_url == normalized_item_url %} active{% endif %}"
            href="{{ site.baseurl }}{{ full_url }}"
            >{{ item.title }}</a
          >
        </li>
        {% endif %} {% endfor %}
      </ul>
    </div>
  </div>
</nav>
